<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mapa Estelar do Nosso Primeiro Beijo</title>
<style>
  body {
    margin: 0;
    background-color: #000000;
    color: #ddd;
    font-family: 'Courier New', Courier, monospace;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    user-select: none;
    padding: 20px;
    box-sizing: border-box;
  }

  h1 {
    margin-top: 20px;
    font-weight: normal;
    font-size: 2.5rem;
    margin-bottom: 30px;
    text-align: center;
    color: #eee;
  }

  .telescope-view {
    width: 90vw;
    max-width: 600px;
    height: 600px;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid #888;
    background-color: #111111;
    touch-action: none;
    position: relative;
    cursor: grab;
    box-shadow: 0 0 15px #555 inset;
  }
  .telescope-view:active {
    cursor: grabbing;
  }

  .draggable-image {
    position: absolute;
    top: 0;
    left: 0;
    user-select: none;
    -webkit-user-drag: none;
    width: auto;
    height: 100%;
    max-width: none;
    transform: translateX(0) translateY(0);
    transition: none !important;
    will-change: transform;
    filter: brightness(1.1);
  }

  /* Contador estilizado */
  #contador {
    margin-top: 35px;
    font-size: 1.4rem;
    color: #ccc;
    white-space: nowrap;
  }

  #contador strong {
    color: #eee;
  }
</style>
</head>
<body>

  <h1>Mapa Estelar do Nosso Primeiro Beijo</h1>

  <div class="telescope-view" id="telescope">
    <img src="starmap.jpeg" alt="Mapa estelar do nosso primeiro beijo" class="draggable-image" id="draggableImage" />
  </div>

  <div id="contador">Carregando contador...</div>

<script>
  // Drag to pan da imagem dentro do círculo
  const telescope = document.getElementById('telescope');
  const img = document.getElementById('draggableImage');

  let isDragging = false;
  let startX, startY;
  let currentX = 0;
  let currentY = 0;

  function clamp(value, min, max) {
    return Math.min(Math.max(value, min), max);
  }

  function updateLimits() {
    const containerRect = telescope.getBoundingClientRect();
    const imgRect = img.getBoundingClientRect();

    return {
      minX: containerRect.width - img.width,
      maxX: 0,
      minY: containerRect.height - img.height,
      maxY: 0
    };
  }

  let limits = updateLimits();

  function onPointerDown(e) {
    e.preventDefault();
    isDragging = true;
    startX = e.clientX || e.touches[0].clientX;
    startY = e.clientY || e.touches[0].clientY;
    telescope.style.cursor = 'grabbing';
  }

  function onPointerMove(e) {
    if (!isDragging) return;
    e.preventDefault();
    const x = e.clientX || e.touches[0].clientX;
    const y = e.clientY || e.touches[0].clientY;

    let deltaX = x - startX;
    let deltaY = y - startY;

    let nextX = clamp(currentX + deltaX, limits.minX, limits.maxX);
    let nextY = clamp(currentY + deltaY, limits.minY, limits.maxY);

    img.style.transform = `translate(${nextX}px, ${nextY}px)`;
  }

  function onPointerUp(e) {
    if (!isDragging) return;
    e.preventDefault();
    const x = e.clientX || (e.changedTouches && e.changedTouches[0].clientX);
    const y = e.clientY || (e.changedTouches && e.changedTouches[0].clientY);

    let deltaX = x - startX;
    let deltaY = y - startY;

    currentX = clamp(currentX + deltaX, limits.minX, limits.maxX);
    currentY = clamp(currentY + deltaY, limits.minY, limits.maxY);

    isDragging = false;
    telescope.style.cursor = 'grab';
  }

  window.addEventListener('resize', () => {
    limits = updateLimits();
    currentX = clamp(currentX, limits.minX, limits.maxX);
    currentY = clamp(currentY, limits.minY, limits.maxY);
    img.style.transform = `translate(${currentX}px, ${currentY}px)`;
  });

  telescope.addEventListener('mousedown', onPointerDown);
  telescope.addEventListener('touchstart', onPointerDown);

  window.addEventListener('mousemove', onPointerMove);
  window.addEventListener('touchmove', onPointerMove);

  window.addEventListener('mouseup', onPointerUp);
  window.addEventListener('touchend', onPointerUp);
  window.addEventListener('touchcancel', onPointerUp);

  // Contador

  const contador = document.getElementById('contador');

  // Data inicial: 01/02/2025 00:00 (formato dd/mm/yyyy)
  const dataInicial = new Date(2025, 1, 1, 0, 0, 0); // meses começam em 0 (0=jan,1=fev)

  function atualizarContador() {
    const agora = new Date();
    let diff = agora - dataInicial; // diferença em ms

    if(diff < 0) {
      contador.textContent = "Ainda não chegou a hora...";
      return;
    }

    // Calcula dias, horas, minutos, segundos
    const segundos = Math.floor(diff / 1000) % 60;
    const minutos = Math.floor(diff / (1000 * 60)) % 60;
    const horas = Math.floor(diff / (1000 * 60 * 60)) % 24;
    const dias = Math.floor(diff / (1000 * 60 * 60 * 24));

    // Formata com zeros à esquerda
    const formato = `${dias}d ${String(horas).padStart(2,'0')}h ${String(minutos).padStart(2,'0')}m ${String(segundos).padStart(2,'0')}s`;

    contador.innerHTML = `Fazem <strong>${formato}</strong> que sou o homem mais feliz do universo.`;
  }

  atualizarContador();
  setInterval(atualizarContador, 1000);
</script>

</body>
</html>
